# Maintainer: James Brink <brink.james@gmail.com>
# Contributor: stef <l0ls0fo2i@ctrlc.hu>

pkgname=qwt
pkgver=6.1.3
pkgrel=0
pkgdesc="Qt Widgets for Technical Applications"
url="http://qwt.sourceforge.net/"
arch="all"
license="Qwt1.0"
depends=""
makedepends="qt5-qtbase-dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://downloads.sourceforge.net/qwt/qwt/qwt-$pkgver.zip
       qwtconfig.pri"
_builddir="$srcdir/$pkgname-$pkgver"

build() {
  cd "$_builddir"
  cp "$srcdir/qwtconfig.pri" .
  qmake-qt5 qwt.pro || exit 1
  make
}

package() {
	cd "$_builddir"
   make INSTALL_ROOT=${pkgdir} install

   # install web designer plugin
   install -d ${pkgdir}/usr/lib/qt4/plugins/designer/
   install -Dm755 designer/plugins/designer/libqwt_designer_plugin.so \
     ${pkgdir}/usr/lib/qt4/plugins/designer/

   # needed by qmake (FS#30407)
   install -d "${pkgdir}"/usr/share/qt4/mkspecs/features/
   install -m644 qwtconfig.pri qwt.prf qwtfunctions.pri \
     "${pkgdir}"/usr/share/qt4/mkspecs/features/

   # move man pages
   #mv "${pkgdir}"/usr/share/doc/qwt/man/ "${pkgdir}"/usr/share/

   # install licence
   install -Dm644 ${srcdir}/${pkgname}-${pkgver}/COPYING \
   	${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

md5sums="558911df37aee4c0c3049860e967401c  qwt-6.1.3.zip
d7bc78bf445513deaefe837217b4a93d  qwtconfig.pri"
sha256sums="027c32c0473a682c1db5b9cb02ebed5e39a4fbb0afd2306e23b1113c30006042  qwt-6.1.3.zip
f78a97aaaa42c239d6fad25cdd52935d0ba9baa70562091310e78ff869600a85  qwtconfig.pri"
sha512sums="8f249e23d50f71d14fca37776ea40d8d6931db14d9602e03a343bfb7a9bf55502202103135b77f583c3890a7924220e8a142a01c448dbde311860d89a3b10fc8  qwt-6.1.3.zip
4921390b531b4c29261a7016106f692e6e788774d38058bb7b93021d9ea5c6097862f860284897462e7c01cf9c9da4036fff96df7b4f54fbe30d638ef8ecc3c7  qwtconfig.pri"